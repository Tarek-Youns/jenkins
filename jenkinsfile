pipeline {
            agent any
            tools {
                    go "null"
                }
            environment {
                        G0111MODULE='on'
                    }

            stages {

                    stage('Test') {

                                    steps {
                                            git 'https://github.com/Admin Turned DevOps/go-webapp-sample.git'
                                            sh 'go test./...'
                                             }
                     }   

                    stage('Build and Run') {
                                    steps {
                                            git 'https://github.com/AdminTurned DevOps/go-webapp-sample.git'
                                            sh 'go build.'
                                           }
                    }
                    stage('Run') {
                                    steps {
                                           sh 'cd /var/lib/jenkins/workspace/go-full-pipeline && go-webapp-sample &'
                                         }      
            }
            
 
                    }                             
}

