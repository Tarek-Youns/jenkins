pipeline {
            agent {
                docker { image 'golang:latest'}
            }
            

            stages {

                    stage('Test') {

                                    steps {
                                            git clone 'https://github.com/AdminTurnedDevOps/go-webapp-sample.git' 
                                            sh 'cd go-webapp-sample; go test .' 
                                             }
                     }   

                    stage('Build and Run') {
                                    steps {
                                            git clone 'https://github.com/AdminTurnedDevOps/go-webapp-sample.git'
                                            sh 'go build .'
                                           }
                    }
                    stage('Run') {
                                    steps {
                                           sh 'cd /var/lib/jenkins/workspace/go-full-pipeline && go-webapp-sample &'
                                         }      
            }
            
 
                    }                             
}


